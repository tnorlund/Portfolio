<div class="[--thread-content-max-width:40rem] @w-lg/main:[--thread-content-max-width:48rem] mx-auto max-w-(--thread-content-max-width) flex-1 group/turn-messages focus-visible:outline-hidden relative flex w-full min-w-0 flex-col agent-turn"
    tabindex="-1">
    <div class="flex max-w-full flex-col grow">
        <div class="absolute flex h-8 w-3 origin-center items-center justify-center"
            style="opacity: 0; transform: scale(0);">
            <div class="bg-token-text-primary h-3 w-3 rounded-full"></div>
        </div>
        <div class="relative my-1 min-h-6">
            <div class="relative flex origin-top-left flex-col gap-2 overflow-x-clip rtl:origin-top-right"
                style="opacity: 1; transform: none;">
                <div class="relative w-full text-start">
                    <div class="flex w-full flex-row items-start justify-between gap-4 text-start"><button
                            class="flex min-w-0 shrink-1 items-center gap-0.5"><span class="font-medium w-full"><span
                                    class="flex items-center gap-1 truncate text-start align-middle text-token-text-secondary hover:text-token-text-primary dark:hover:text-token-text-primary dark:text-[var(--interactive-label-tertiary-default)]"
                                    style="opacity: 1;">
                                    <div class="truncate">Thought for 25s</div><svg width="20" height="20"
                                        viewBox="0 0 20 20" fill="currentColor" xmlns="http://www.w3.org/2000/svg"
                                        data-rtl-flip="" class="icon-xs">
                                        <path
                                            d="M7.52925 3.7793C7.75652 3.55203 8.10803 3.52383 8.36616 3.69434L8.47065 3.7793L14.2207 9.5293C14.4804 9.789 14.4804 10.211 14.2207 10.4707L8.47065 16.2207C8.21095 16.4804 7.78895 16.4804 7.52925 16.2207C7.26955 15.961 7.26955 15.539 7.52925 15.2793L12.8085 10L7.52925 4.7207L7.44429 4.61621C7.27378 4.35808 7.30198 4.00657 7.52925 3.7793Z">
                                        </path>
                                    </svg>
                                </span></span></button></div>
                </div>
                <div class="max-w-[calc(0.8*var(--thread-content-max-width,40rem))]"></div>
            </div>
        </div>
        <div data-message-author-role="assistant" data-message-id="81de70f0-c858-4f5e-85fe-f96cd21b7d06" dir="auto"
            class="min-h-8 text-message relative flex w-full flex-col items-end gap-2 text-start break-words whitespace-normal [.text-message+&amp;]:mt-1"
            data-message-model-slug="gpt-5-2-thinking">
            <div class="flex w-full flex-col gap-1 empty:hidden first:pt-[1px]">
                <div class="markdown prose dark:prose-invert w-full break-words light markdown-new-styling">
                    <p data-start="0" data-end="194">Below is a practical way to add <strong data-start="32"
                            data-end="72">typed payloads + data quality checks</strong> to a Python wrapper around the
                        Google Places API, while staying flexible across the two “flavors” you’ll see in the wild:</p>
                    <ul data-start="196" data-end="578">
                        <li data-start="196" data-end="398">
                            <p data-start="198" data-end="398"><strong data-start="198" data-end="218">Places API
                                    (New)</strong>: <code data-start="220"
                                    data-end="250">places.googleapis.com/v1/...</code> where responses are a <strong
                                    data-start="273" data-end="289">Place object</strong>, and a <strong
                                    data-start="297" data-end="322">FieldMask is required</strong> (typically via <code
                                    data-start="338" data-end="356">X-Goog-FieldMask</code>). <span class=""
                                    data-state="closed"><span
                                        class="ms-1 inline-flex max-w-full items-center relative top-[-0.094rem] animate-[show_150ms_ease-in]"
                                        data-testid="webpage-citation-pill" style="width: 119px;"><a
                                            href="https://developers.google.com/maps/documentation/places/web-service/place-details"
                                            target="_blank" rel="noopener"
                                            alt="https://developers.google.com/maps/documentation/places/web-service/place-details"
                                            class="flex h-4.5 overflow-hidden rounded-xl px-2 text-[9px] font-medium transition-colors duration-150 ease-in-out text-token-text-secondary! bg-[#F4F4F4]! dark:bg-[#303030]!"
                                            style="max-width: 119px;"><span
                                                class="relative start-0 bottom-0 flex h-full w-full items-center"><span
                                                    class="flex h-4 w-full items-center justify-between"
                                                    style="opacity: 1; transform: none;"><span
                                                        class="max-w-[15ch] grow truncate overflow-hidden text-center">Google
                                                        for Developers</span><span
                                                        class="-me-1 flex h-full items-center rounded-full px-1 text-[#8F8F8F]">+1</span></span></span></a></span></span>
                            </p>
                        </li>
                        <li data-start="399" data-end="578">
                            <p data-start="401" data-end="578"><strong data-start="401" data-end="424">Places API
                                    (Legacy)</strong>: <code data-start="426"
                                    data-end="466">maps.googleapis.com/maps/api/place/...</code> where responses are
                                usually wrapped in <code data-start="506" data-end="514">status</code> + <code
                                    data-start="517" data-end="525">result</code> / <code data-start="528"
                                    data-end="537">results</code>. <span class="" data-state="closed"><span
                                        class="ms-1 inline-flex max-w-full items-center relative top-[-0.094rem] animate-[show_150ms_ease-in]"
                                        data-testid="webpage-citation-pill" style="width: 105px;"><a
                                            href="https://developers.google.com/maps/documentation/places/web-service/legacy/details?utm_source=chatgpt.com"
                                            target="_blank" rel="noopener"
                                            alt="https://developers.google.com/maps/documentation/places/web-service/legacy/details?utm_source=chatgpt.com"
                                            class="flex h-4.5 overflow-hidden rounded-xl px-2 text-[9px] font-medium transition-colors duration-150 ease-in-out text-token-text-secondary! bg-[#F4F4F4]! dark:bg-[#303030]!"
                                            style="max-width: 105px;"><span
                                                class="relative start-0 bottom-0 flex h-full w-full items-center"><span
                                                    class="flex h-4 w-full items-center justify-between overflow-hidden"
                                                    style="opacity: 1; transform: none;"><span
                                                        class="max-w-[15ch] grow truncate overflow-hidden text-center">Google
                                                        for Developers</span></span></span></a></span></span></p>
                        </li>
                    </ul>
                    <p data-start="580" data-end="774">Because field masks control which properties exist, the key trick
                        is: <strong data-start="650" data-end="682">model everything as optional</strong>, then enforce
                        <em data-start="697" data-end="703">your</em> “required” subset via a small validator that knows
                        what you requested.</p>
                    <hr data-start="776" data-end="779">
                    <h2 data-start="781" data-end="828">What you can get back (New API mental model)</h2>
                    <p data-start="830" data-end="1008">For Places API (New), the response is a <strong data-start="870"
                            data-end="886">Place object</strong>, and the set of fields returned is exactly what you
                        request in your <strong data-start="955" data-end="969">field mask</strong>. <span class=""
                            data-state="closed"><span
                                class="ms-1 inline-flex max-w-full items-center relative top-[-0.094rem] animate-[show_150ms_ease-in]"
                                data-testid="webpage-citation-pill" style="width: 119px;"><a
                                    href="https://developers.google.com/maps/documentation/places/web-service/place-details"
                                    target="_blank" rel="noopener"
                                    alt="https://developers.google.com/maps/documentation/places/web-service/place-details"
                                    class="flex h-4.5 overflow-hidden rounded-xl px-2 text-[9px] font-medium transition-colors duration-150 ease-in-out text-token-text-secondary! bg-[#F4F4F4]! dark:bg-[#303030]!"
                                    style="max-width: 119px;"><span
                                        class="relative start-0 bottom-0 flex h-full w-full items-center"><span
                                            class="flex h-4 w-full items-center justify-between"
                                            style="opacity: 1; transform: none;"><span
                                                class="max-w-[15ch] grow truncate overflow-hidden text-center">Google
                                                for Developers</span><span
                                                class="-me-1 flex h-full items-center rounded-full px-1 text-[#8F8F8F]">+1</span></span></span></a></span></span>
                    </p>
                    <p data-start="1010" data-end="1239">Google also publishes the canonical list of available place
                        fields (e.g., <code data-start="1084" data-end="1088">id</code>, <code data-start="1090"
                            data-end="1103">displayName</code>, <code data-start="1105"
                            data-end="1123">formattedAddress</code>, <code data-start="1125"
                            data-end="1135">location</code>, <code data-start="1137" data-end="1145">rating</code>,
                        <code data-start="1147" data-end="1156">reviews</code>, <code data-start="1158"
                            data-end="1170">websiteUri</code>, <code data-start="1172"
                            data-end="1193">regularOpeningHours</code>, etc.). <span class="" data-state="closed"><span
                                class="ms-1 inline-flex max-w-full items-center relative top-[-0.094rem] animate-[show_150ms_ease-in]"
                                data-testid="webpage-citation-pill" style="width: 105px;"><a
                                    href="https://developers.google.com/maps/documentation/places/web-service/data-fields"
                                    target="_blank" rel="noopener"
                                    alt="https://developers.google.com/maps/documentation/places/web-service/data-fields"
                                    class="flex h-4.5 overflow-hidden rounded-xl px-2 text-[9px] font-medium transition-colors duration-150 ease-in-out text-token-text-secondary! bg-[#F4F4F4]! dark:bg-[#303030]!"
                                    style="max-width: 105px;"><span
                                        class="relative start-0 bottom-0 flex h-full w-full items-center"><span
                                            class="flex h-4 w-full items-center justify-between overflow-hidden"
                                            style="opacity: 1; transform: none;"><span
                                                class="max-w-[15ch] grow truncate overflow-hidden text-center">Google
                                                for Developers</span></span></span></a></span></span></p>
                    <hr data-start="1241" data-end="1244">
                    <h2 data-start="1246" data-end="1284">Recommended implementation approach</h2>
                    <h3 data-start="1286" data-end="1340">1) Use a “typed dataclass” with runtime validation</h3>
                    <p data-start="1341" data-end="1427">If you truly want <em data-start="1359"
                            data-end="1372">dataclasses</em> (not just type hints), the most ergonomic approach is:</p>
                    <ul data-start="1429" data-end="1590">
                        <li data-start="1429" data-end="1490">
                            <p data-start="1431" data-end="1490"><code data-start="1431" data-end="1441">pydantic</code>
                                for validation (fast to implement, great errors)</p>
                        </li>
                        <li data-start="1491" data-end="1590">
                            <p data-start="1493" data-end="1590">expose your models as <code data-start="1515"
                                    data-end="1548">@pydantic.dataclasses.dataclass</code> so your public API is still
                                “dataclass-y”</p>
                        </li>
                    </ul>
                    <p data-start="1592" data-end="1733">(If you don’t want an added dependency, I can also show a
                        pure-stdlib <code data-start="1662" data-end="1695">dataclasses + manual validators</code>
                        approach, but it’s more boilerplate.)</p>
                    <h3 data-start="1735" data-end="1786">2) Add a “quality gate” tied to your field mask</h3>
                    <p data-start="1787" data-end="1857">Your wrapper knows what it asked for (field mask), so you can
                        enforce:</p>
                    <ul data-start="1858" data-end="2035">
                        <li data-start="1858" data-end="1922">
                            <p data-start="1860" data-end="1922">required presence (e.g. if you request <code
                                    data-start="1899" data-end="1909">location</code>, require it)</p>
                        </li>
                        <li data-start="1923" data-end="1987">
                            <p data-start="1925" data-end="1987">value ranges (lat/lng bounds, rating 0–5, non-negative
                                counts)</p>
                        </li>
                        <li data-start="1988" data-end="2035">
                            <p data-start="1990" data-end="2035">format checks (URI, phone number shape, etc.)</p>
                        </li>
                    </ul>
                    <hr data-start="2037" data-end="2040">
                    <h2 data-start="2042" data-end="2091">A solid starting model for Place Details (New)</h2>
                    <p data-start="2093" data-end="2180">This covers the most common fields people ask for and bakes in
                        a few high-value checks.</p>
                    <pre class="overflow-visible! px-0!" data-start="2182" data-end="5166"><div class="contain-inline-size rounded-2xl corner-superellipse/1.1 relative bg-token-sidebar-surface-primary"><div class="flex items-center text-token-text-secondary px-4 py-2 text-xs font-sans justify-between h-9 bg-token-sidebar-surface-primary select-none rounded-t-2xl corner-t-superellipse/1.1">python</div><div class="@w-xl/main:top-9 sticky top-[calc(--spacing(9)+var(--header-height))]"><div class="absolute end-0 bottom-0 flex h-9 items-center pe-2"><div class="bg-token-bg-elevated-secondary text-token-text-secondary flex items-center gap-4 rounded-sm px-2 font-sans text-xs"><button class="flex gap-1 items-center select-none py-1" aria-label="Copy"><svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path d="M12.668 10.667C12.668 9.95614 12.668 9.46258 12.6367 9.0791C12.6137 8.79732 12.5758 8.60761 12.5244 8.46387L12.4688 8.33399C12.3148 8.03193 12.0803 7.77885 11.793 7.60254L11.666 7.53125C11.508 7.45087 11.2963 7.39395 10.9209 7.36328C10.5374 7.33197 10.0439 7.33203 9.33301 7.33203H6.5C5.78896 7.33203 5.29563 7.33195 4.91211 7.36328C4.63016 7.38632 4.44065 7.42413 4.29688 7.47559L4.16699 7.53125C3.86488 7.68518 3.61186 7.9196 3.43555 8.20703L3.36524 8.33399C3.28478 8.49198 3.22795 8.70352 3.19727 9.0791C3.16595 9.46259 3.16504 9.95611 3.16504 10.667V13.5C3.16504 14.211 3.16593 14.7044 3.19727 15.0879C3.22797 15.4636 3.28473 15.675 3.36524 15.833L3.43555 15.959C3.61186 16.2466 3.86474 16.4807 4.16699 16.6348L4.29688 16.6914C4.44063 16.7428 4.63025 16.7797 4.91211 16.8027C5.29563 16.8341 5.78896 16.835 6.5 16.835H9.33301C10.0439 16.835 10.5374 16.8341 10.9209 16.8027C11.2965 16.772 11.508 16.7152 11.666 16.6348L11.793 16.5645C12.0804 16.3881 12.3148 16.1351 12.4688 15.833L12.5244 15.7031C12.5759 15.5594 12.6137 15.3698 12.6367 15.0879C12.6681 14.7044 12.668 14.211 12.668 13.5V10.667ZM13.998 12.665C14.4528 12.6634 14.8011 12.6602 15.0879 12.6367C15.4635 12.606 15.675 12.5492 15.833 12.4688L15.959 12.3975C16.2466 12.2211 16.4808 11.9682 16.6348 11.666L16.6914 11.5361C16.7428 11.3924 16.7797 11.2026 16.8027 10.9209C16.8341 10.5374 16.835 10.0439 16.835 9.33301V6.5C16.835 5.78896 16.8341 5.29563 16.8027 4.91211C16.7797 4.63025 16.7428 4.44063 16.6914 4.29688L16.6348 4.16699C16.4807 3.86474 16.2466 3.61186 15.959 3.43555L15.833 3.36524C15.675 3.28473 15.4636 3.22797 15.0879 3.19727C14.7044 3.16593 14.211 3.16504 13.5 3.16504H10.667C9.9561 3.16504 9.46259 3.16595 9.0791 3.19727C8.79739 3.22028 8.6076 3.2572 8.46387 3.30859L8.33399 3.36524C8.03176 3.51923 7.77886 3.75343 7.60254 4.04102L7.53125 4.16699C7.4508 4.32498 7.39397 4.53655 7.36328 4.91211C7.33985 5.19893 7.33562 5.54719 7.33399 6.00195H9.33301C10.022 6.00195 10.5791 6.00131 11.0293 6.03809C11.4873 6.07551 11.8937 6.15471 12.2705 6.34668L12.4883 6.46875C12.984 6.7728 13.3878 7.20854 13.6533 7.72949L13.7197 7.87207C13.8642 8.20859 13.9292 8.56974 13.9619 8.9707C13.9987 9.42092 13.998 9.97799 13.998 10.667V12.665ZM18.165 9.33301C18.165 10.022 18.1657 10.5791 18.1289 11.0293C18.0961 11.4302 18.0311 11.7914 17.8867 12.1279L17.8203 12.2705C17.5549 12.7914 17.1509 13.2272 16.6553 13.5313L16.4365 13.6533C16.0599 13.8452 15.6541 13.9245 15.1963 13.9619C14.8593 13.9895 14.4624 13.9935 13.9951 13.9951C13.9935 14.4624 13.9895 14.8593 13.9619 15.1963C13.9292 15.597 13.864 15.9576 13.7197 16.2939L13.6533 16.4365C13.3878 16.9576 12.9841 17.3941 12.4883 17.6982L12.2705 17.8203C11.8937 18.0123 11.4873 18.0915 11.0293 18.1289C10.5791 18.1657 10.022 18.165 9.33301 18.165H6.5C5.81091 18.165 5.25395 18.1657 4.80371 18.1289C4.40306 18.0962 4.04235 18.031 3.70606 17.8867L3.56348 17.8203C3.04244 17.5548 2.60585 17.151 2.30176 16.6553L2.17969 16.4365C1.98788 16.0599 1.90851 15.6541 1.87109 15.1963C1.83431 14.746 1.83496 14.1891 1.83496 13.5V10.667C1.83496 9.978 1.83432 9.42091 1.87109 8.9707C1.90851 8.5127 1.98772 8.10625 2.17969 7.72949L2.30176 7.51172C2.60586 7.0159 3.04236 6.6122 3.56348 6.34668L3.70606 6.28027C4.04237 6.136 4.40303 6.07083 4.80371 6.03809C5.14051 6.01057 5.53708 6.00551 6.00391 6.00391C6.00551 5.53708 6.01057 5.14051 6.03809 4.80371C6.0755 4.34588 6.15483 3.94012 6.34668 3.56348L6.46875 3.34473C6.77282 2.84912 7.20856 2.44514 7.72949 2.17969L7.87207 2.11328C8.20855 1.96886 8.56979 1.90385 8.9707 1.87109C9.42091 1.83432 9.978 1.83496 10.667 1.83496H13.5C14.1891 1.83496 14.746 1.83431 15.1963 1.87109C15.6541 1.90851 16.0599 1.98788 16.4365 2.17969L16.6553 2.30176C17.151 2.60585 17.5548 3.04244 17.8203 3.56348L17.8867 3.70606C18.031 4.04235 18.0962 4.40306 18.1289 4.80371C18.1657 5.25395 18.165 5.81091 18.165 6.5V9.33301Z"></path></svg>Copy code</button></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="whitespace-pre! language-python"><span><span><span class="hljs-keyword">from</span></span><span> __future__ </span><span><span class="hljs-keyword">import</span></span><span> annotations

</span><span><span class="hljs-keyword">from</span></span><span> typing </span><span><span class="hljs-keyword">import</span></span><span> </span><span><span class="hljs-type">Any</span></span><span>, </span><span><span class="hljs-type">Dict</span></span><span>, </span><span><span class="hljs-type">List</span></span><span>, </span><span><span class="hljs-type">Optional</span></span><span>, </span><span><span class="hljs-type">Set</span></span><span>
</span><span><span class="hljs-keyword">from</span></span><span> pydantic </span><span><span class="hljs-keyword">import</span></span><span> BaseModel, Field, HttpUrl, ValidationError, field_validator, model_validator


</span><span><span class="hljs-keyword">class</span></span><span> </span><span><span class="hljs-title class_">LocalizedText</span></span><span>(</span><span><span class="hljs-title class_ inherited__">BaseModel</span></span><span>):
    text: </span><span><span class="hljs-built_in">str</span></span><span>
    languageCode: </span><span><span class="hljs-type">Optional</span></span><span>[</span><span><span class="hljs-built_in">str</span></span><span>] = </span><span><span class="hljs-literal">None</span></span><span>


</span><span><span class="hljs-keyword">class</span></span><span> </span><span><span class="hljs-title class_">LatLng</span></span><span>(</span><span><span class="hljs-title class_ inherited__">BaseModel</span></span><span>):
    latitude: </span><span><span class="hljs-built_in">float</span></span><span>
    longitude: </span><span><span class="hljs-built_in">float</span></span><span>

</span><span><span class="hljs-meta">    @field_validator(<span class="hljs-params"><span class="hljs-string">"latitude"</span></span></span></span><span>)
</span><span><span class="hljs-meta">    @classmethod</span></span><span>
    </span><span><span class="hljs-keyword">def</span></span><span> </span><span><span class="hljs-title function_">lat_range</span></span><span>(</span><span><span class="hljs-params">cls, v: <span class="hljs-built_in">float</span></span></span><span>) -&gt; </span><span><span class="hljs-built_in">float</span></span><span>:
        </span><span><span class="hljs-keyword">if</span></span><span> </span><span><span class="hljs-keyword">not</span></span><span> (-</span><span><span class="hljs-number">90.0</span></span><span> &lt;= v &lt;= </span><span><span class="hljs-number">90.0</span></span><span>):
            </span><span><span class="hljs-keyword">raise</span></span><span> ValueError(</span><span><span class="hljs-string">f"latitude out of range: <span class="hljs-subst">{v}</span></span></span><span>")
        </span><span><span class="hljs-keyword">return</span></span><span> v

</span><span><span class="hljs-meta">    @field_validator(<span class="hljs-params"><span class="hljs-string">"longitude"</span></span></span></span><span>)
</span><span><span class="hljs-meta">    @classmethod</span></span><span>
    </span><span><span class="hljs-keyword">def</span></span><span> </span><span><span class="hljs-title function_">lng_range</span></span><span>(</span><span><span class="hljs-params">cls, v: <span class="hljs-built_in">float</span></span></span><span>) -&gt; </span><span><span class="hljs-built_in">float</span></span><span>:
        </span><span><span class="hljs-keyword">if</span></span><span> </span><span><span class="hljs-keyword">not</span></span><span> (-</span><span><span class="hljs-number">180.0</span></span><span> &lt;= v &lt;= </span><span><span class="hljs-number">180.0</span></span><span>):
            </span><span><span class="hljs-keyword">raise</span></span><span> ValueError(</span><span><span class="hljs-string">f"longitude out of range: <span class="hljs-subst">{v}</span></span></span><span>")
        </span><span><span class="hljs-keyword">return</span></span><span> v


</span><span><span class="hljs-keyword">class</span></span><span> </span><span><span class="hljs-title class_">Viewport</span></span><span>(</span><span><span class="hljs-title class_ inherited__">BaseModel</span></span><span>):
    low: LatLng
    high: LatLng


</span><span><span class="hljs-keyword">class</span></span><span> </span><span><span class="hljs-title class_">PlusCode</span></span><span>(</span><span><span class="hljs-title class_ inherited__">BaseModel</span></span><span>):
    globalCode: </span><span><span class="hljs-built_in">str</span></span><span>
    compoundCode: </span><span><span class="hljs-type">Optional</span></span><span>[</span><span><span class="hljs-built_in">str</span></span><span>] = </span><span><span class="hljs-literal">None</span></span><span>


</span><span><span class="hljs-keyword">class</span></span><span> </span><span><span class="hljs-title class_">Place</span></span><span>(</span><span><span class="hljs-title class_ inherited__">BaseModel</span></span><span>):
    </span><span><span class="hljs-comment"># Identifiers</span></span><span>
    </span><span><span class="hljs-built_in">id</span></span><span>: </span><span><span class="hljs-type">Optional</span></span><span>[</span><span><span class="hljs-built_in">str</span></span><span>] = </span><span><span class="hljs-literal">None</span></span><span>
    name: </span><span><span class="hljs-type">Optional</span></span><span>[</span><span><span class="hljs-built_in">str</span></span><span>] = </span><span><span class="hljs-literal">None</span></span><span>  </span><span><span class="hljs-comment"># resource name like "places/PLACE_ID" in New API :contentReference[oaicite:4]{index=4}</span></span><span>

    </span><span><span class="hljs-comment"># Human-facing</span></span><span>
    displayName: </span><span><span class="hljs-type">Optional</span></span><span>[LocalizedText] = </span><span><span class="hljs-literal">None</span></span><span>
    formattedAddress: </span><span><span class="hljs-type">Optional</span></span><span>[</span><span><span class="hljs-built_in">str</span></span><span>] = </span><span><span class="hljs-literal">None</span></span><span>
    shortFormattedAddress: </span><span><span class="hljs-type">Optional</span></span><span>[</span><span><span class="hljs-built_in">str</span></span><span>] = </span><span><span class="hljs-literal">None</span></span><span>

    </span><span><span class="hljs-comment"># Geo</span></span><span>
    location: </span><span><span class="hljs-type">Optional</span></span><span>[LatLng] = </span><span><span class="hljs-literal">None</span></span><span>
    viewport: </span><span><span class="hljs-type">Optional</span></span><span>[Viewport] = </span><span><span class="hljs-literal">None</span></span><span>
    plusCode: </span><span><span class="hljs-type">Optional</span></span><span>[PlusCode] = </span><span><span class="hljs-literal">None</span></span><span>

    </span><span><span class="hljs-comment"># Classification</span></span><span>
    types: </span><span><span class="hljs-type">Optional</span></span><span>[</span><span><span class="hljs-type">List</span></span><span>[</span><span><span class="hljs-built_in">str</span></span><span>]] = </span><span><span class="hljs-literal">None</span></span><span>
    primaryType: </span><span><span class="hljs-type">Optional</span></span><span>[</span><span><span class="hljs-built_in">str</span></span><span>] = </span><span><span class="hljs-literal">None</span></span><span>
    primaryTypeDisplayName: </span><span><span class="hljs-type">Optional</span></span><span>[LocalizedText] = </span><span><span class="hljs-literal">None</span></span><span>

    </span><span><span class="hljs-comment"># Popular business fields</span></span><span>
    businessStatus: </span><span><span class="hljs-type">Optional</span></span><span>[</span><span><span class="hljs-built_in">str</span></span><span>] = </span><span><span class="hljs-literal">None</span></span><span>
    rating: </span><span><span class="hljs-type">Optional</span></span><span>[</span><span><span class="hljs-built_in">float</span></span><span>] = </span><span><span class="hljs-literal">None</span></span><span>
    userRatingCount: </span><span><span class="hljs-type">Optional</span></span><span>[</span><span><span class="hljs-built_in">int</span></span><span>] = </span><span><span class="hljs-literal">None</span></span><span>
    websiteUri: </span><span><span class="hljs-type">Optional</span></span><span>[HttpUrl] = </span><span><span class="hljs-literal">None</span></span><span>
    googleMapsUri: </span><span><span class="hljs-type">Optional</span></span><span>[HttpUrl] = </span><span><span class="hljs-literal">None</span></span><span>

</span><span><span class="hljs-meta">    @field_validator(<span class="hljs-params"><span class="hljs-string">"rating"</span></span></span></span><span>)
</span><span><span class="hljs-meta">    @classmethod</span></span><span>
    </span><span><span class="hljs-keyword">def</span></span><span> </span><span><span class="hljs-title function_">rating_range</span></span><span>(</span><span><span class="hljs-params">cls, v: <span class="hljs-type">Optional</span></span></span><span>[</span><span><span class="hljs-built_in">float</span></span><span>]) -&gt; </span><span><span class="hljs-type">Optional</span></span><span>[</span><span><span class="hljs-built_in">float</span></span><span>]:
        </span><span><span class="hljs-keyword">if</span></span><span> v </span><span><span class="hljs-keyword">is</span></span><span> </span><span><span class="hljs-literal">None</span></span><span>:
            </span><span><span class="hljs-keyword">return</span></span><span> v
        </span><span><span class="hljs-keyword">if</span></span><span> </span><span><span class="hljs-keyword">not</span></span><span> (</span><span><span class="hljs-number">0.0</span></span><span> &lt;= v &lt;= </span><span><span class="hljs-number">5.0</span></span><span>):
            </span><span><span class="hljs-keyword">raise</span></span><span> ValueError(</span><span><span class="hljs-string">f"rating out of range: <span class="hljs-subst">{v}</span></span></span><span>")
        </span><span><span class="hljs-keyword">return</span></span><span> v

</span><span><span class="hljs-meta">    @field_validator(<span class="hljs-params"><span class="hljs-string">"userRatingCount"</span></span></span></span><span>)
</span><span><span class="hljs-meta">    @classmethod</span></span><span>
    </span><span><span class="hljs-keyword">def</span></span><span> </span><span><span class="hljs-title function_">non_negative_count</span></span><span>(</span><span><span class="hljs-params">cls, v: <span class="hljs-type">Optional</span></span></span><span>[</span><span><span class="hljs-built_in">int</span></span><span>]) -&gt; </span><span><span class="hljs-type">Optional</span></span><span>[</span><span><span class="hljs-built_in">int</span></span><span>]:
        </span><span><span class="hljs-keyword">if</span></span><span> v </span><span><span class="hljs-keyword">is</span></span><span> </span><span><span class="hljs-literal">None</span></span><span>:
            </span><span><span class="hljs-keyword">return</span></span><span> v
        </span><span><span class="hljs-keyword">if</span></span><span> v &lt; </span><span><span class="hljs-number">0</span></span><span>:
            </span><span><span class="hljs-keyword">raise</span></span><span> ValueError(</span><span><span class="hljs-string">f"userRatingCount must be &gt;= 0, got <span class="hljs-subst">{v}</span></span></span><span>")
        </span><span><span class="hljs-keyword">return</span></span><span> v


</span><span><span class="hljs-keyword">def</span></span><span> </span><span><span class="hljs-title function_">validate_place_expected_fields</span></span><span>(</span><span><span class="hljs-params">place: Place, expected_fields: <span class="hljs-type">Set</span></span></span><span>[</span><span><span class="hljs-built_in">str</span></span><span>]) -&gt; </span><span><span class="hljs-literal">None</span></span><span>:
    <span class="hljs-string">"""
    Data quality gate: ensure that any field you requested via FieldMask exists in the parsed model.
    This is how you catch partial responses, upstream changes, or wrapper mistakes.
    """</span>
    missing = []
    </span><span><span class="hljs-keyword">for</span></span><span> f </span><span><span class="hljs-keyword">in</span></span><span> expected_fields:
        </span><span><span class="hljs-comment"># supports top-level fields like "id", "displayName", "location"</span></span><span>
        </span><span><span class="hljs-comment"># (you can extend this to nested paths if you use them)</span></span><span>
        </span><span><span class="hljs-keyword">if</span></span><span> </span><span><span class="hljs-built_in">getattr</span></span><span>(place, f, </span><span><span class="hljs-literal">None</span></span><span>) </span><span><span class="hljs-keyword">is</span></span><span> </span><span><span class="hljs-literal">None</span></span><span>:
            missing.append(f)

    </span><span><span class="hljs-keyword">if</span></span><span> missing:
        </span><span><span class="hljs-keyword">raise</span></span><span> ValueError(</span><span><span class="hljs-string">f"Missing expected fields from Places response: <span class="hljs-subst">{missing}</span></span></span><span>")
</span></span></code></div></div></pre>
                    <h3 data-start="5168" data-end="5213">How you’d use it in your requests wrapper</h3>
                    <pre class="overflow-visible! px-0!" data-start="5215" data-end="5934"><div class="contain-inline-size rounded-2xl corner-superellipse/1.1 relative bg-token-sidebar-surface-primary"><div class="flex items-center text-token-text-secondary px-4 py-2 text-xs font-sans justify-between h-9 bg-token-sidebar-surface-primary select-none rounded-t-2xl corner-t-superellipse/1.1">python</div><div class="@w-xl/main:top-9 sticky top-[calc(--spacing(9)+var(--header-height))]"><div class="absolute end-0 bottom-0 flex h-9 items-center pe-2"><div class="bg-token-bg-elevated-secondary text-token-text-secondary flex items-center gap-4 rounded-sm px-2 font-sans text-xs"><button class="flex gap-1 items-center select-none py-1" aria-label="Copy"><svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path d="M12.668 10.667C12.668 9.95614 12.668 9.46258 12.6367 9.0791C12.6137 8.79732 12.5758 8.60761 12.5244 8.46387L12.4688 8.33399C12.3148 8.03193 12.0803 7.77885 11.793 7.60254L11.666 7.53125C11.508 7.45087 11.2963 7.39395 10.9209 7.36328C10.5374 7.33197 10.0439 7.33203 9.33301 7.33203H6.5C5.78896 7.33203 5.29563 7.33195 4.91211 7.36328C4.63016 7.38632 4.44065 7.42413 4.29688 7.47559L4.16699 7.53125C3.86488 7.68518 3.61186 7.9196 3.43555 8.20703L3.36524 8.33399C3.28478 8.49198 3.22795 8.70352 3.19727 9.0791C3.16595 9.46259 3.16504 9.95611 3.16504 10.667V13.5C3.16504 14.211 3.16593 14.7044 3.19727 15.0879C3.22797 15.4636 3.28473 15.675 3.36524 15.833L3.43555 15.959C3.61186 16.2466 3.86474 16.4807 4.16699 16.6348L4.29688 16.6914C4.44063 16.7428 4.63025 16.7797 4.91211 16.8027C5.29563 16.8341 5.78896 16.835 6.5 16.835H9.33301C10.0439 16.835 10.5374 16.8341 10.9209 16.8027C11.2965 16.772 11.508 16.7152 11.666 16.6348L11.793 16.5645C12.0804 16.3881 12.3148 16.1351 12.4688 15.833L12.5244 15.7031C12.5759 15.5594 12.6137 15.3698 12.6367 15.0879C12.6681 14.7044 12.668 14.211 12.668 13.5V10.667ZM13.998 12.665C14.4528 12.6634 14.8011 12.6602 15.0879 12.6367C15.4635 12.606 15.675 12.5492 15.833 12.4688L15.959 12.3975C16.2466 12.2211 16.4808 11.9682 16.6348 11.666L16.6914 11.5361C16.7428 11.3924 16.7797 11.2026 16.8027 10.9209C16.8341 10.5374 16.835 10.0439 16.835 9.33301V6.5C16.835 5.78896 16.8341 5.29563 16.8027 4.91211C16.7797 4.63025 16.7428 4.44063 16.6914 4.29688L16.6348 4.16699C16.4807 3.86474 16.2466 3.61186 15.959 3.43555L15.833 3.36524C15.675 3.28473 15.4636 3.22797 15.0879 3.19727C14.7044 3.16593 14.211 3.16504 13.5 3.16504H10.667C9.9561 3.16504 9.46259 3.16595 9.0791 3.19727C8.79739 3.22028 8.6076 3.2572 8.46387 3.30859L8.33399 3.36524C8.03176 3.51923 7.77886 3.75343 7.60254 4.04102L7.53125 4.16699C7.4508 4.32498 7.39397 4.53655 7.36328 4.91211C7.33985 5.19893 7.33562 5.54719 7.33399 6.00195H9.33301C10.022 6.00195 10.5791 6.00131 11.0293 6.03809C11.4873 6.07551 11.8937 6.15471 12.2705 6.34668L12.4883 6.46875C12.984 6.7728 13.3878 7.20854 13.6533 7.72949L13.7197 7.87207C13.8642 8.20859 13.9292 8.56974 13.9619 8.9707C13.9987 9.42092 13.998 9.97799 13.998 10.667V12.665ZM18.165 9.33301C18.165 10.022 18.1657 10.5791 18.1289 11.0293C18.0961 11.4302 18.0311 11.7914 17.8867 12.1279L17.8203 12.2705C17.5549 12.7914 17.1509 13.2272 16.6553 13.5313L16.4365 13.6533C16.0599 13.8452 15.6541 13.9245 15.1963 13.9619C14.8593 13.9895 14.4624 13.9935 13.9951 13.9951C13.9935 14.4624 13.9895 14.8593 13.9619 15.1963C13.9292 15.597 13.864 15.9576 13.7197 16.2939L13.6533 16.4365C13.3878 16.9576 12.9841 17.3941 12.4883 17.6982L12.2705 17.8203C11.8937 18.0123 11.4873 18.0915 11.0293 18.1289C10.5791 18.1657 10.022 18.165 9.33301 18.165H6.5C5.81091 18.165 5.25395 18.1657 4.80371 18.1289C4.40306 18.0962 4.04235 18.031 3.70606 17.8867L3.56348 17.8203C3.04244 17.5548 2.60585 17.151 2.30176 16.6553L2.17969 16.4365C1.98788 16.0599 1.90851 15.6541 1.87109 15.1963C1.83431 14.746 1.83496 14.1891 1.83496 13.5V10.667C1.83496 9.978 1.83432 9.42091 1.87109 8.9707C1.90851 8.5127 1.98772 8.10625 2.17969 7.72949L2.30176 7.51172C2.60586 7.0159 3.04236 6.6122 3.56348 6.34668L3.70606 6.28027C4.04237 6.136 4.40303 6.07083 4.80371 6.03809C5.14051 6.01057 5.53708 6.00551 6.00391 6.00391C6.00551 5.53708 6.01057 5.14051 6.03809 4.80371C6.0755 4.34588 6.15483 3.94012 6.34668 3.56348L6.46875 3.34473C6.77282 2.84912 7.20856 2.44514 7.72949 2.17969L7.87207 2.11328C8.20855 1.96886 8.56979 1.90385 8.9707 1.87109C9.42091 1.83432 9.978 1.83496 10.667 1.83496H13.5C14.1891 1.83496 14.746 1.83431 15.1963 1.87109C15.6541 1.90851 16.0599 1.98788 16.4365 2.17969L16.6553 2.30176C17.151 2.60585 17.5548 3.04244 17.8203 3.56348L17.8867 3.70606C18.031 4.04235 18.0962 4.40306 18.1289 4.80371C18.1657 5.25395 18.165 5.81091 18.165 6.5V9.33301Z"></path></svg>Copy code</button></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="whitespace-pre! language-python"><span><span><span class="hljs-keyword">import</span></span><span> requests

</span><span><span class="hljs-keyword">def</span></span><span> </span><span><span class="hljs-title function_">get_place_details_new</span></span><span>(</span><span><span class="hljs-params">place_id: <span class="hljs-built_in">str</span></span></span><span>, field_mask: </span><span><span class="hljs-built_in">str</span></span><span>, api_key: </span><span><span class="hljs-built_in">str</span></span><span>) -&gt; Place:
    url = </span><span><span class="hljs-string">f"https://places.googleapis.com/v1/places/<span class="hljs-subst">{place_id}</span></span></span><span>"

    headers = {
        </span><span><span class="hljs-string">"X-Goog-Api-Key"</span></span><span>: api_key,
        </span><span><span class="hljs-string">"X-Goog-FieldMask"</span></span><span>: field_mask,  </span><span><span class="hljs-comment"># required in New API :contentReference[oaicite:5]{index=5}</span></span><span>
        </span><span><span class="hljs-string">"Content-Type"</span></span><span>: </span><span><span class="hljs-string">"application/json"</span></span><span>,
    }

    resp = requests.get(url, headers=headers, timeout=</span><span><span class="hljs-number">20</span></span><span>)
    resp.raise_for_status()

    payload = resp.json()
    place = Place.model_validate(payload)

    expected = {f.strip() </span><span><span class="hljs-keyword">for</span></span><span> f </span><span><span class="hljs-keyword">in</span></span><span> field_mask.split(</span><span><span class="hljs-string">","</span></span><span>) </span><span><span class="hljs-keyword">if</span></span><span> f.strip() </span><span><span class="hljs-keyword">and</span></span><span> f.strip() != </span><span><span class="hljs-string">"*"</span></span><span>}
    </span><span><span class="hljs-keyword">if</span></span><span> expected:
        validate_place_expected_fields(place, expected)

    </span><span><span class="hljs-keyword">return</span></span><span> place
</span></span></code></div></div></pre>
                    <p data-start="5936" data-end="6079">This directly matches Google’s documented behavior: <strong
                            data-start="5988" data-end="6040">field mask drives the fields in the Place object</strong>.
                        <span class="" data-state="closed"><span
                                class="ms-1 inline-flex max-w-full items-center relative top-[-0.094rem] animate-[show_150ms_ease-in]"
                                data-testid="webpage-citation-pill" style="width: 119px;"><a
                                    href="https://developers.google.com/maps/documentation/places/web-service/place-details"
                                    target="_blank" rel="noopener"
                                    alt="https://developers.google.com/maps/documentation/places/web-service/place-details"
                                    class="flex h-4.5 overflow-hidden rounded-xl px-2 text-[9px] font-medium transition-colors duration-150 ease-in-out text-token-text-secondary! bg-[#F4F4F4]! dark:bg-[#303030]!"
                                    style="max-width: 119px;"><span
                                        class="relative start-0 bottom-0 flex h-full w-full items-center"><span
                                            class="flex h-4 w-full items-center justify-between"
                                            style="opacity: 1; transform: none;"><span
                                                class="max-w-[15ch] grow truncate overflow-hidden text-center">Google
                                                for Developers</span><span
                                                class="-me-1 flex h-full items-center rounded-full px-1 text-[#8F8F8F]">+1</span></span></span></a></span></span>
                    </p>
                    <hr data-start="6081" data-end="6084">
                    <h2 data-start="6086" data-end="6129">Supporting Legacy responses without pain</h2>
                    <p data-start="6131" data-end="6179">Legacy endpoints typically return wrappers like:</p>
                    <ul data-start="6181" data-end="6282">
                        <li data-start="6181" data-end="6230">
                            <p data-start="6183" data-end="6230">details: <code data-start="6192"
                                    data-end="6230">{ "status": "...", "result": {...} }</code></p>
                        </li>
                        <li data-start="6231" data-end="6282">
                            <p data-start="6233" data-end="6282">search: <code data-start="6241"
                                    data-end="6282">{ "status": "...", "results": [ ... ] }</code></p>
                        </li>
                    </ul>
                    <p data-start="6284" data-end="6377">Google still documents the legacy Place Details format. <span
                            class="" data-state="closed"><span
                                class="ms-1 inline-flex max-w-full items-center relative top-[-0.094rem] animate-[show_150ms_ease-in]"
                                data-testid="webpage-citation-pill" style="width: 105px;"><a
                                    href="https://developers.google.com/maps/documentation/places/web-service/legacy/details?utm_source=chatgpt.com"
                                    target="_blank" rel="noopener"
                                    alt="https://developers.google.com/maps/documentation/places/web-service/legacy/details?utm_source=chatgpt.com"
                                    class="flex h-4.5 overflow-hidden rounded-xl px-2 text-[9px] font-medium transition-colors duration-150 ease-in-out text-token-text-secondary! bg-[#F4F4F4]! dark:bg-[#303030]!"
                                    style="max-width: 105px;"><span
                                        class="relative start-0 bottom-0 flex h-full w-full items-center"><span
                                            class="flex h-4 w-full items-center justify-between overflow-hidden"
                                            style="opacity: 1; transform: none;"><span
                                                class="max-w-[15ch] grow truncate overflow-hidden text-center">Google
                                                for Developers</span></span></span></a></span></span></p>
                    <p data-start="6379" data-end="6417">You can model that with thin wrappers:</p>
                    <pre class="overflow-visible! px-0!" data-start="6419" data-end="7642"><div class="contain-inline-size rounded-2xl corner-superellipse/1.1 relative bg-token-sidebar-surface-primary"><div class="flex items-center text-token-text-secondary px-4 py-2 text-xs font-sans justify-between h-9 bg-token-sidebar-surface-primary select-none rounded-t-2xl corner-t-superellipse/1.1">python</div><div class="@w-xl/main:top-9 sticky top-[calc(--spacing(9)+var(--header-height))]"><div class="absolute end-0 bottom-0 flex h-9 items-center pe-2"><div class="bg-token-bg-elevated-secondary text-token-text-secondary flex items-center gap-4 rounded-sm px-2 font-sans text-xs"><button class="flex gap-1 items-center select-none py-1" aria-label="Copy"><svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="icon-sm"><path d="M12.668 10.667C12.668 9.95614 12.668 9.46258 12.6367 9.0791C12.6137 8.79732 12.5758 8.60761 12.5244 8.46387L12.4688 8.33399C12.3148 8.03193 12.0803 7.77885 11.793 7.60254L11.666 7.53125C11.508 7.45087 11.2963 7.39395 10.9209 7.36328C10.5374 7.33197 10.0439 7.33203 9.33301 7.33203H6.5C5.78896 7.33203 5.29563 7.33195 4.91211 7.36328C4.63016 7.38632 4.44065 7.42413 4.29688 7.47559L4.16699 7.53125C3.86488 7.68518 3.61186 7.9196 3.43555 8.20703L3.36524 8.33399C3.28478 8.49198 3.22795 8.70352 3.19727 9.0791C3.16595 9.46259 3.16504 9.95611 3.16504 10.667V13.5C3.16504 14.211 3.16593 14.7044 3.19727 15.0879C3.22797 15.4636 3.28473 15.675 3.36524 15.833L3.43555 15.959C3.61186 16.2466 3.86474 16.4807 4.16699 16.6348L4.29688 16.6914C4.44063 16.7428 4.63025 16.7797 4.91211 16.8027C5.29563 16.8341 5.78896 16.835 6.5 16.835H9.33301C10.0439 16.835 10.5374 16.8341 10.9209 16.8027C11.2965 16.772 11.508 16.7152 11.666 16.6348L11.793 16.5645C12.0804 16.3881 12.3148 16.1351 12.4688 15.833L12.5244 15.7031C12.5759 15.5594 12.6137 15.3698 12.6367 15.0879C12.6681 14.7044 12.668 14.211 12.668 13.5V10.667ZM13.998 12.665C14.4528 12.6634 14.8011 12.6602 15.0879 12.6367C15.4635 12.606 15.675 12.5492 15.833 12.4688L15.959 12.3975C16.2466 12.2211 16.4808 11.9682 16.6348 11.666L16.6914 11.5361C16.7428 11.3924 16.7797 11.2026 16.8027 10.9209C16.8341 10.5374 16.835 10.0439 16.835 9.33301V6.5C16.835 5.78896 16.8341 5.29563 16.8027 4.91211C16.7797 4.63025 16.7428 4.44063 16.6914 4.29688L16.6348 4.16699C16.4807 3.86474 16.2466 3.61186 15.959 3.43555L15.833 3.36524C15.675 3.28473 15.4636 3.22797 15.0879 3.19727C14.7044 3.16593 14.211 3.16504 13.5 3.16504H10.667C9.9561 3.16504 9.46259 3.16595 9.0791 3.19727C8.79739 3.22028 8.6076 3.2572 8.46387 3.30859L8.33399 3.36524C8.03176 3.51923 7.77886 3.75343 7.60254 4.04102L7.53125 4.16699C7.4508 4.32498 7.39397 4.53655 7.36328 4.91211C7.33985 5.19893 7.33562 5.54719 7.33399 6.00195H9.33301C10.022 6.00195 10.5791 6.00131 11.0293 6.03809C11.4873 6.07551 11.8937 6.15471 12.2705 6.34668L12.4883 6.46875C12.984 6.7728 13.3878 7.20854 13.6533 7.72949L13.7197 7.87207C13.8642 8.20859 13.9292 8.56974 13.9619 8.9707C13.9987 9.42092 13.998 9.97799 13.998 10.667V12.665ZM18.165 9.33301C18.165 10.022 18.1657 10.5791 18.1289 11.0293C18.0961 11.4302 18.0311 11.7914 17.8867 12.1279L17.8203 12.2705C17.5549 12.7914 17.1509 13.2272 16.6553 13.5313L16.4365 13.6533C16.0599 13.8452 15.6541 13.9245 15.1963 13.9619C14.8593 13.9895 14.4624 13.9935 13.9951 13.9951C13.9935 14.4624 13.9895 14.8593 13.9619 15.1963C13.9292 15.597 13.864 15.9576 13.7197 16.2939L13.6533 16.4365C13.3878 16.9576 12.9841 17.3941 12.4883 17.6982L12.2705 17.8203C11.8937 18.0123 11.4873 18.0915 11.0293 18.1289C10.5791 18.1657 10.022 18.165 9.33301 18.165H6.5C5.81091 18.165 5.25395 18.1657 4.80371 18.1289C4.40306 18.0962 4.04235 18.031 3.70606 17.8867L3.56348 17.8203C3.04244 17.5548 2.60585 17.151 2.30176 16.6553L2.17969 16.4365C1.98788 16.0599 1.90851 15.6541 1.87109 15.1963C1.83431 14.746 1.83496 14.1891 1.83496 13.5V10.667C1.83496 9.978 1.83432 9.42091 1.87109 8.9707C1.90851 8.5127 1.98772 8.10625 2.17969 7.72949L2.30176 7.51172C2.60586 7.0159 3.04236 6.6122 3.56348 6.34668L3.70606 6.28027C4.04237 6.136 4.40303 6.07083 4.80371 6.03809C5.14051 6.01057 5.53708 6.00551 6.00391 6.00391C6.00551 5.53708 6.01057 5.14051 6.03809 4.80371C6.0755 4.34588 6.15483 3.94012 6.34668 3.56348L6.46875 3.34473C6.77282 2.84912 7.20856 2.44514 7.72949 2.17969L7.87207 2.11328C8.20855 1.96886 8.56979 1.90385 8.9707 1.87109C9.42091 1.83432 9.978 1.83496 10.667 1.83496H13.5C14.1891 1.83496 14.746 1.83431 15.1963 1.87109C15.6541 1.90851 16.0599 1.98788 16.4365 2.17969L16.6553 2.30176C17.151 2.60585 17.5548 3.04244 17.8203 3.56348L17.8867 3.70606C18.031 4.04235 18.0962 4.40306 18.1289 4.80371C18.1657 5.25395 18.165 5.81091 18.165 6.5V9.33301Z"></path></svg>Copy code</button></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="whitespace-pre! language-python"><span><span><span class="hljs-keyword">class</span></span><span> </span><span><span class="hljs-title class_">LegacyDetailsResponse</span></span><span>(</span><span><span class="hljs-title class_ inherited__">BaseModel</span></span><span>):
    status: </span><span><span class="hljs-built_in">str</span></span><span>
    result: </span><span><span class="hljs-type">Optional</span></span><span>[</span><span><span class="hljs-type">Dict</span></span><span>[</span><span><span class="hljs-built_in">str</span></span><span>, </span><span><span class="hljs-type">Any</span></span><span>]] = </span><span><span class="hljs-literal">None</span></span><span>
    error_message: </span><span><span class="hljs-type">Optional</span></span><span>[</span><span><span class="hljs-built_in">str</span></span><span>] = </span><span><span class="hljs-literal">None</span></span><span>

</span><span><span class="hljs-keyword">def</span></span><span> </span><span><span class="hljs-title function_">parse_legacy_details</span></span><span>(</span><span><span class="hljs-params">payload: <span class="hljs-type">Dict</span></span></span><span>[</span><span><span class="hljs-built_in">str</span></span><span>, </span><span><span class="hljs-type">Any</span></span><span>]) -&gt; Place:
    </span><span><span class="hljs-comment"># Convert legacy "result" shape into something close to your Place model,</span></span><span>
    </span><span><span class="hljs-comment"># OR define a separate LegacyPlace model if you prefer.</span></span><span>
    resp = LegacyDetailsResponse.model_validate(payload)
    </span><span><span class="hljs-keyword">if</span></span><span> resp.status != </span><span><span class="hljs-string">"OK"</span></span><span>:
        </span><span><span class="hljs-keyword">raise</span></span><span> ValueError(</span><span><span class="hljs-string">f"Legacy Places error: status=<span class="hljs-subst">{resp.status}</span></span></span><span> error=</span><span><span class="hljs-subst">{resp.error_message}</span></span><span>")

    </span><span><span class="hljs-comment"># Minimal mapping example:</span></span><span>
    r = resp.result </span><span><span class="hljs-keyword">or</span></span><span> {}
    mapped = {
        </span><span><span class="hljs-string">"id"</span></span><span>: r.get(</span><span><span class="hljs-string">"place_id"</span></span><span>),
        </span><span><span class="hljs-string">"displayName"</span></span><span>: {</span><span><span class="hljs-string">"text"</span></span><span>: r.get(</span><span><span class="hljs-string">"name"</span></span><span>)} </span><span><span class="hljs-keyword">if</span></span><span> r.get(</span><span><span class="hljs-string">"name"</span></span><span>) </span><span><span class="hljs-keyword">else</span></span><span> </span><span><span class="hljs-literal">None</span></span><span>,
        </span><span><span class="hljs-string">"formattedAddress"</span></span><span>: r.get(</span><span><span class="hljs-string">"formatted_address"</span></span><span>),
        </span><span><span class="hljs-string">"rating"</span></span><span>: r.get(</span><span><span class="hljs-string">"rating"</span></span><span>),
        </span><span><span class="hljs-string">"userRatingCount"</span></span><span>: r.get(</span><span><span class="hljs-string">"user_ratings_total"</span></span><span>),
        </span><span><span class="hljs-string">"websiteUri"</span></span><span>: r.get(</span><span><span class="hljs-string">"website"</span></span><span>),
        </span><span><span class="hljs-string">"googleMapsUri"</span></span><span>: r.get(</span><span><span class="hljs-string">"url"</span></span><span>),
        </span><span><span class="hljs-string">"location"</span></span><span>: (
            {</span><span><span class="hljs-string">"latitude"</span></span><span>: r[</span><span><span class="hljs-string">"geometry"</span></span><span>][</span><span><span class="hljs-string">"location"</span></span><span>][</span><span><span class="hljs-string">"lat"</span></span><span>], </span><span><span class="hljs-string">"longitude"</span></span><span>: r[</span><span><span class="hljs-string">"geometry"</span></span><span>][</span><span><span class="hljs-string">"location"</span></span><span>][</span><span><span class="hljs-string">"lng"</span></span><span>]}
            </span><span><span class="hljs-keyword">if</span></span><span> r.get(</span><span><span class="hljs-string">"geometry"</span></span><span>, {}).get(</span><span><span class="hljs-string">"location"</span></span><span>) </span><span><span class="hljs-keyword">else</span></span><span> </span><span><span class="hljs-literal">None</span></span><span>
        ),
        </span><span><span class="hljs-string">"types"</span></span><span>: r.get(</span><span><span class="hljs-string">"types"</span></span><span>),
    }
    </span><span><span class="hljs-keyword">return</span></span><span> Place.model_validate(mapped)
</span></span></code></div></div></pre>
                    <hr data-start="7644" data-end="7647">
                    <h2 data-start="7649" data-end="7694">High-value data quality checks to add next</h2>
                    <ol data-start="7696" data-end="8372">
                        <li data-start="7696" data-end="7742">
                            <p data-start="7699" data-end="7742"><strong data-start="7699" data-end="7724">FieldMask
                                    enforcement</strong> (already shown)</p>
                        </li>
                        <li data-start="7743" data-end="7814">
                            <p data-start="7746" data-end="7814"><strong data-start="7746" data-end="7767">Geospatial
                                    sanity</strong>: lat/lng ranges; viewport corners make sense</p>
                        </li>
                        <li data-start="7815" data-end="7873">
                            <p data-start="7818" data-end="7873"><strong data-start="7818" data-end="7835">Rating
                                    sanity</strong>: rating 0–5; <code data-start="7849"
                                    data-end="7871">userRatingCount &gt;= 0</code></p>
                        </li>
                        <li data-start="7874" data-end="8029">
                            <p data-start="7877" data-end="7920"><strong data-start="7877" data-end="7896">Enum
                                    tightening</strong> for things you rely on:</p>
                            <ul data-start="7924" data-end="8029">
                                <li data-start="7924" data-end="7972">
                                    <p data-start="7926" data-end="7972"><code data-start="7926"
                                            data-end="7942">businessStatus</code> (if you use it for filtering)</p>
                                </li>
                                <li data-start="7976" data-end="8029">
                                    <p data-start="7978" data-end="8029"><code data-start="7978"
                                            data-end="7990">priceLevel</code> / <code data-start="7993"
                                            data-end="8005">priceRange</code> (if you request them)</p>
                                </li>
                            </ul>
                        </li>
                        <li data-start="8030" data-end="8241">
                            <p data-start="8033" data-end="8241"><strong data-start="8033" data-end="8062">“At least one
                                    identifier”</strong>: ensure <code data-start="8071" data-end="8075">id</code> or
                                <code data-start="8079" data-end="8085">name</code> exists (New API has both concepts:
                                <code data-start="8121" data-end="8125">id</code> is the standalone place ID; <code
                                    data-start="8154" data-end="8160">name</code> is the resource name <code
                                    data-start="8182" data-end="8199">places/PLACE_ID</code>). <span class=""
                                    data-state="closed"><span
                                        class="ms-1 inline-flex max-w-full items-center relative top-[-0.094rem] animate-[show_150ms_ease-in]"
                                        data-testid="webpage-citation-pill" style="width: 105px;"><a
                                            href="https://developers.google.com/maps/documentation/places/web-service/place-details"
                                            target="_blank" rel="noopener"
                                            alt="https://developers.google.com/maps/documentation/places/web-service/place-details"
                                            class="flex h-4.5 overflow-hidden rounded-xl px-2 text-[9px] font-medium transition-colors duration-150 ease-in-out text-token-text-secondary! bg-[#F4F4F4]! dark:bg-[#303030]!"
                                            style="max-width: 105px;"><span
                                                class="relative start-0 bottom-0 flex h-full w-full items-center"><span
                                                    class="flex h-4 w-full items-center justify-between overflow-hidden"
                                                    style="opacity: 1; transform: none;"><span
                                                        class="max-w-[15ch] grow truncate overflow-hidden text-center">Google
                                                        for Developers</span></span></span></a></span></span></p>
                        </li>
                        <li data-start="8242" data-end="8372">
                            <p data-start="8245" data-end="8372"><strong data-start="8245" data-end="8271">Error payload
                                    handling</strong>: for New API you’ll also want to detect structured error responses
                                (HTTP 4xx/5xx) vs a Place object.</p>
                        </li>
                    </ol>
                    <hr data-start="8374" data-end="8377">
                    <h2 data-start="8379" data-end="8420">What I’d do in your wrapper right away</h2>
                    <ul data-start="8422" data-end="8841">
                        <li data-start="8422" data-end="8493">
                            <p data-start="8424" data-end="8493">Add a <code data-start="8430"
                                    data-end="8437">Place</code> model (like above) + <code data-start="8459"
                                    data-end="8493">validate_place_expected_fields()</code></p>
                        </li>
                        <li data-start="8494" data-end="8682">
                            <p data-start="8496" data-end="8570">Centralize request execution (<code data-start="8526"
                                    data-end="8545">requests.get/post</code>) into one function that:</p>
                            <ul data-start="8573" data-end="8682">
                                <li data-start="8573" data-end="8593">
                                    <p data-start="8575" data-end="8593">checks HTTP status</p>
                                </li>
                                <li data-start="8596" data-end="8609">
                                    <p data-start="8598" data-end="8609">parses JSON</p>
                                </li>
                                <li data-start="8612" data-end="8656">
                                    <p data-start="8614" data-end="8656">routes to the right parser (New vs Legacy)</p>
                                </li>
                                <li data-start="8659" data-end="8682">
                                    <p data-start="8661" data-end="8682">returns typed objects</p>
                                </li>
                            </ul>
                        </li>
                        <li data-start="8683" data-end="8841">
                            <p data-start="8685" data-end="8841">Keep your “required fields” as a <strong
                                    data-start="8718" data-end="8746">configuration per method</strong> (details vs
                                nearby vs text search) so you don’t accidentally demand fields you didn’t request.</p>
                        </li>
                    </ul>
                    <p data-start="8843" data-end="9162">If you paste one example payload you’re currently receiving
                        (redact the key), I can tailor the model to the exact endpoints you’re calling (e.g., Place
                        Details vs Nearby Search) and add the right nested types (opening hours, photos, reviews, etc.)
                        based on the official field list. <span class="" data-state="closed"><span
                                class="ms-1 inline-flex max-w-full items-center relative top-[-0.094rem] animate-[show_150ms_ease-in]"
                                data-testid="webpage-citation-pill" style="width: 105px;"><a
                                    href="https://developers.google.com/maps/documentation/places/web-service/data-fields"
                                    target="_blank" rel="noopener"
                                    alt="https://developers.google.com/maps/documentation/places/web-service/data-fields"
                                    class="flex h-4.5 overflow-hidden rounded-xl px-2 text-[9px] font-medium transition-colors duration-150 ease-in-out text-token-text-secondary! bg-[#F4F4F4]! dark:bg-[#303030]!"
                                    style="max-width: 105px;"><span
                                        class="relative start-0 bottom-0 flex h-full w-full items-center"><span
                                            class="flex h-4 w-full items-center justify-between overflow-hidden"
                                            style="opacity: 1; transform: none;"><span
                                                class="max-w-[15ch] grow truncate overflow-hidden text-center">Google
                                                for Developers</span></span></span></a></span></span></p>
                </div>
            </div>
        </div>
    </div>
    <div class="z-0 flex min-h-[46px] justify-start">
        <div class="touch:-me-2 touch:-ms-3.5 -ms-2.5 -me-1 flex flex-wrap items-center gap-y-4 p-1 select-none touch:w-[calc(100%+--spacing(3.5))] -mt-1 w-[calc(100%+--spacing(2.5))] duration-[1.5s] focus-within:transition-none hover:transition-none touch:pointer-events-auto pointer-events-none [mask-image:linear-gradient(to_right,black_33%,transparent_66%)] [mask-size:300%_100%] [mask-position:100%_0%] motion-safe:transition-[mask-position] group-hover/turn-messages:pointer-events-auto group-hover/turn-messages:[mask-position:0_0] group-focus-within/turn-messages:pointer-events-auto group-focus-within/turn-messages:[mask-position:0_0] has-data-[state=open]:pointer-events-auto has-data-[state=open]:[mask-position:0_0]"
            style="-webkit-mask-position-x: 0%; -webkit-mask-position-y: 0%;"><button
                class="text-token-text-secondary hover:bg-token-bg-secondary rounded-lg" aria-label="Copy"
                aria-pressed="false" data-testid="copy-turn-action-button" data-state="closed"><span
                    class="flex items-center justify-center touch:w-10 h-8 w-8"><svg width="20" height="20"
                        viewBox="0 0 20 20" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="icon">
                        <path
                            d="M12.668 10.667C12.668 9.95614 12.668 9.46258 12.6367 9.0791C12.6137 8.79732 12.5758 8.60761 12.5244 8.46387L12.4688 8.33399C12.3148 8.03193 12.0803 7.77885 11.793 7.60254L11.666 7.53125C11.508 7.45087 11.2963 7.39395 10.9209 7.36328C10.5374 7.33197 10.0439 7.33203 9.33301 7.33203H6.5C5.78896 7.33203 5.29563 7.33195 4.91211 7.36328C4.63016 7.38632 4.44065 7.42413 4.29688 7.47559L4.16699 7.53125C3.86488 7.68518 3.61186 7.9196 3.43555 8.20703L3.36524 8.33399C3.28478 8.49198 3.22795 8.70352 3.19727 9.0791C3.16595 9.46259 3.16504 9.95611 3.16504 10.667V13.5C3.16504 14.211 3.16593 14.7044 3.19727 15.0879C3.22797 15.4636 3.28473 15.675 3.36524 15.833L3.43555 15.959C3.61186 16.2466 3.86474 16.4807 4.16699 16.6348L4.29688 16.6914C4.44063 16.7428 4.63025 16.7797 4.91211 16.8027C5.29563 16.8341 5.78896 16.835 6.5 16.835H9.33301C10.0439 16.835 10.5374 16.8341 10.9209 16.8027C11.2965 16.772 11.508 16.7152 11.666 16.6348L11.793 16.5645C12.0804 16.3881 12.3148 16.1351 12.4688 15.833L12.5244 15.7031C12.5759 15.5594 12.6137 15.3698 12.6367 15.0879C12.6681 14.7044 12.668 14.211 12.668 13.5V10.667ZM13.998 12.665C14.4528 12.6634 14.8011 12.6602 15.0879 12.6367C15.4635 12.606 15.675 12.5492 15.833 12.4688L15.959 12.3975C16.2466 12.2211 16.4808 11.9682 16.6348 11.666L16.6914 11.5361C16.7428 11.3924 16.7797 11.2026 16.8027 10.9209C16.8341 10.5374 16.835 10.0439 16.835 9.33301V6.5C16.835 5.78896 16.8341 5.29563 16.8027 4.91211C16.7797 4.63025 16.7428 4.44063 16.6914 4.29688L16.6348 4.16699C16.4807 3.86474 16.2466 3.61186 15.959 3.43555L15.833 3.36524C15.675 3.28473 15.4636 3.22797 15.0879 3.19727C14.7044 3.16593 14.211 3.16504 13.5 3.16504H10.667C9.9561 3.16504 9.46259 3.16595 9.0791 3.19727C8.79739 3.22028 8.6076 3.2572 8.46387 3.30859L8.33399 3.36524C8.03176 3.51923 7.77886 3.75343 7.60254 4.04102L7.53125 4.16699C7.4508 4.32498 7.39397 4.53655 7.36328 4.91211C7.33985 5.19893 7.33562 5.54719 7.33399 6.00195H9.33301C10.022 6.00195 10.5791 6.00131 11.0293 6.03809C11.4873 6.07551 11.8937 6.15471 12.2705 6.34668L12.4883 6.46875C12.984 6.7728 13.3878 7.20854 13.6533 7.72949L13.7197 7.87207C13.8642 8.20859 13.9292 8.56974 13.9619 8.9707C13.9987 9.42092 13.998 9.97799 13.998 10.667V12.665ZM18.165 9.33301C18.165 10.022 18.1657 10.5791 18.1289 11.0293C18.0961 11.4302 18.0311 11.7914 17.8867 12.1279L17.8203 12.2705C17.5549 12.7914 17.1509 13.2272 16.6553 13.5313L16.4365 13.6533C16.0599 13.8452 15.6541 13.9245 15.1963 13.9619C14.8593 13.9895 14.4624 13.9935 13.9951 13.9951C13.9935 14.4624 13.9895 14.8593 13.9619 15.1963C13.9292 15.597 13.864 15.9576 13.7197 16.2939L13.6533 16.4365C13.3878 16.9576 12.9841 17.3941 12.4883 17.6982L12.2705 17.8203C11.8937 18.0123 11.4873 18.0915 11.0293 18.1289C10.5791 18.1657 10.022 18.165 9.33301 18.165H6.5C5.81091 18.165 5.25395 18.1657 4.80371 18.1289C4.40306 18.0962 4.04235 18.031 3.70606 17.8867L3.56348 17.8203C3.04244 17.5548 2.60585 17.151 2.30176 16.6553L2.17969 16.4365C1.98788 16.0599 1.90851 15.6541 1.87109 15.1963C1.83431 14.746 1.83496 14.1891 1.83496 13.5V10.667C1.83496 9.978 1.83432 9.42091 1.87109 8.9707C1.90851 8.5127 1.98772 8.10625 2.17969 7.72949L2.30176 7.51172C2.60586 7.0159 3.04236 6.6122 3.56348 6.34668L3.70606 6.28027C4.04237 6.136 4.40303 6.07083 4.80371 6.03809C5.14051 6.01057 5.53708 6.00551 6.00391 6.00391C6.00551 5.53708 6.01057 5.14051 6.03809 4.80371C6.0755 4.34588 6.15483 3.94012 6.34668 3.56348L6.46875 3.34473C6.77282 2.84912 7.20856 2.44514 7.72949 2.17969L7.87207 2.11328C8.20855 1.96886 8.56979 1.90385 8.9707 1.87109C9.42091 1.83432 9.978 1.83496 10.667 1.83496H13.5C14.1891 1.83496 14.746 1.83431 15.1963 1.87109C15.6541 1.90851 16.0599 1.98788 16.4365 2.17969L16.6553 2.30176C17.151 2.60585 17.5548 3.04244 17.8203 3.56348L17.8867 3.70606C18.031 4.04235 18.0962 4.40306 18.1289 4.80371C18.1657 5.25395 18.165 5.81091 18.165 6.5V9.33301Z">
                        </path>
                    </svg></span></button><button
                class="text-token-text-secondary hover:bg-token-bg-secondary rounded-lg" aria-label="Good response"
                aria-pressed="false" data-testid="good-response-turn-action-button" data-state="closed"><span
                    class="flex items-center justify-center touch:w-10 h-8 w-8"><svg width="20" height="20"
                        viewBox="0 0 20 20" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="icon">
                        <path
                            d="M10.9153 1.83987L11.2942 1.88772L11.4749 1.91507C13.2633 2.24201 14.4107 4.01717 13.9749 5.78225L13.9261 5.95901L13.3987 7.6719C13.7708 7.67575 14.0961 7.68389 14.3792 7.70608C14.8737 7.74486 15.3109 7.82759 15.7015 8.03323L15.8528 8.11819C16.5966 8.56353 17.1278 9.29625 17.3167 10.1475L17.347 10.3096C17.403 10.69 17.3647 11.0832 17.2835 11.5098C17.2375 11.7517 17.1735 12.0212 17.096 12.3233L16.8255 13.3321L16.4456 14.7276C16.2076 15.6001 16.0438 16.2356 15.7366 16.7305L15.595 16.9346C15.2989 17.318 14.9197 17.628 14.4866 17.8408L14.2982 17.9258C13.6885 18.1774 12.9785 18.1651 11.9446 18.1651H7.33331C6.64422 18.1651 6.08726 18.1657 5.63702 18.1289C5.23638 18.0962 4.87565 18.031 4.53936 17.8867L4.39679 17.8203C3.87576 17.5549 3.43916 17.151 3.13507 16.6553L3.013 16.4366C2.82119 16.0599 2.74182 15.6541 2.7044 15.1963C2.66762 14.7461 2.66827 14.1891 2.66827 13.5V11.667C2.66827 10.9349 2.66214 10.4375 2.77569 10.0137L2.83722 9.81253C3.17599 8.81768 3.99001 8.05084 5.01397 7.77639L5.17706 7.73928C5.56592 7.66435 6.02595 7.66799 6.66632 7.66799C6.9429 7.66799 7.19894 7.52038 7.33624 7.2803L10.2562 2.16995L10.3118 2.08792C10.4544 1.90739 10.6824 1.81092 10.9153 1.83987ZM7.33136 14.167C7.33136 14.9841 7.33714 15.2627 7.39386 15.4746L7.42999 15.5918C7.62644 16.1686 8.09802 16.6134 8.69171 16.7725L8.87042 16.8067C9.07652 16.8323 9.38687 16.835 10.0003 16.835H11.9446C13.099 16.835 13.4838 16.8228 13.7903 16.6963L13.8997 16.6465C14.1508 16.5231 14.3716 16.3444 14.5433 16.1221L14.6155 16.0166C14.7769 15.7552 14.8968 15.3517 15.1624 14.378L15.5433 12.9824L15.8079 11.9922C15.8804 11.7102 15.9368 11.4711 15.9769 11.2608C16.0364 10.948 16.0517 10.7375 16.0394 10.5791L16.0179 10.4356C15.9156 9.97497 15.641 9.57381 15.2542 9.31253L15.0814 9.20999C14.9253 9.12785 14.6982 9.06544 14.2747 9.03225C13.8477 8.99881 13.2923 8.99807 12.5003 8.99807C12.2893 8.99807 12.0905 8.89822 11.9651 8.72854C11.8398 8.55879 11.8025 8.33942 11.8646 8.13772L12.6556 5.56741L12.7054 5.36331C12.8941 4.35953 12.216 3.37956 11.1878 3.2178L8.49054 7.93948C8.23033 8.39484 7.81431 8.72848 7.33136 8.88967V14.167ZM3.99835 13.5C3.99835 14.2111 3.99924 14.7044 4.03058 15.0879C4.06128 15.4636 4.11804 15.675 4.19854 15.833L4.26886 15.959C4.44517 16.2466 4.69805 16.4808 5.0003 16.6348L5.13019 16.6905C5.27397 16.7419 5.46337 16.7797 5.74542 16.8028C5.97772 16.8217 6.25037 16.828 6.58722 16.8311C6.41249 16.585 6.27075 16.3136 6.1712 16.0215L6.10968 15.8194C5.99614 15.3956 6.00128 14.899 6.00128 14.167V9.00296C5.79386 9.0067 5.65011 9.01339 5.53741 9.02737L5.3587 9.06057C4.76502 9.21965 4.29247 9.66448 4.09601 10.2412L4.06085 10.3584C4.00404 10.5705 3.99835 10.8493 3.99835 11.667V13.5Z">
                        </path>
                    </svg></span></button><button
                class="text-token-text-secondary hover:bg-token-bg-secondary rounded-lg" aria-label="Bad response"
                aria-pressed="false" data-testid="bad-response-turn-action-button" data-state="closed"><span
                    class="flex items-center justify-center touch:w-10 h-8 w-8"><svg width="20" height="20"
                        viewBox="0 0 20 20" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="icon">
                        <path
                            d="M12.6687 5.83304C12.6687 5.22006 12.6649 4.91019 12.6394 4.70413L12.6062 4.52542C12.4471 3.93179 12.0022 3.45922 11.4255 3.26272L11.3083 3.22757C11.0963 3.17075 10.8175 3.16507 9.99974 3.16507H8.0554C7.04558 3.16507 6.62456 3.17475 6.32982 3.26175L6.2097 3.30374C5.95005 3.41089 5.71908 3.57635 5.53392 3.78616L5.45677 3.87796C5.30475 4.0748 5.20336 4.33135 5.03392 4.91702L4.83763 5.6221L4.45677 7.01761C4.24829 7.78204 4.10326 8.31846 4.02318 8.73929C3.94374 9.15672 3.94298 9.39229 3.98119 9.56448L4.03587 9.75784C4.18618 10.1996 4.50043 10.5702 4.91771 10.7901L5.05052 10.8477C5.20009 10.9014 5.40751 10.9429 5.72533 10.9678C6.15231 11.0012 6.70771 11.002 7.49974 11.002C7.71076 11.002 7.90952 11.1018 8.0349 11.2715C8.14465 11.4201 8.18683 11.6067 8.15404 11.7862L8.13548 11.8623L7.34447 14.4326C7.01523 15.5033 7.71404 16.6081 8.81126 16.7813L11.5095 12.0606L11.5827 11.9405C11.8445 11.5461 12.2289 11.2561 12.6687 11.1094V5.83304ZM17.3318 8.33304C17.3318 8.97366 17.3364 9.43432 17.2615 9.82327L17.2234 9.98538C16.949 11.0094 16.1821 11.8233 15.1872 12.1621L14.9861 12.2237C14.5624 12.3372 14.0656 12.3321 13.3337 12.3321C13.0915 12.3321 12.8651 12.4453 12.7204 12.6348L12.6638 12.7198L9.74388 17.8301C9.61066 18.0631 9.35005 18.1935 9.08372 18.1602L8.70579 18.1123C6.75379 17.8682 5.49542 15.9213 6.07396 14.041L6.60033 12.3272C6.22861 12.3233 5.90377 12.3161 5.62083 12.294C5.18804 12.26 4.79914 12.1931 4.44701 12.0391L4.29857 11.9668C3.52688 11.5605 2.95919 10.8555 2.72533 10.0205L2.68333 9.85257C2.58769 9.42154 2.62379 8.97768 2.71654 8.49026C2.80865 8.00634 2.97082 7.41139 3.17357 6.668L3.55443 5.27249L3.74583 4.58011C3.9286 3.94171 4.10186 3.45682 4.40404 3.06546L4.53685 2.9053C4.85609 2.54372 5.25433 2.25896 5.70189 2.07425L5.93626 1.99222C6.49455 1.82612 7.15095 1.83499 8.0554 1.83499H12.6667C13.3558 1.83499 13.9128 1.83434 14.363 1.87112C14.8208 1.90854 15.2266 1.98789 15.6033 2.17972L15.821 2.30179C16.317 2.6059 16.7215 3.04226 16.987 3.56351L17.0535 3.70608C17.1977 4.04236 17.2629 4.40311 17.2956 4.80374C17.3324 5.25398 17.3318 5.81094 17.3318 6.50003V8.33304ZM13.9978 10.9961C14.3321 10.9901 14.5013 10.977 14.6413 10.9395L14.7585 10.9033C15.3353 10.7069 15.7801 10.2353 15.9392 9.64163L15.9724 9.46292C15.998 9.25682 16.0017 8.94657 16.0017 8.33304V6.50003C16.0017 5.78899 16.0008 5.29566 15.9695 4.91214C15.9464 4.6301 15.9086 4.44069 15.8572 4.2969L15.8015 4.16702C15.6475 3.86478 15.4133 3.6119 15.1257 3.43558L14.9997 3.36526C14.8418 3.28477 14.6302 3.228 14.2546 3.19729C14.0221 3.1783 13.7491 3.17109 13.4118 3.168C13.6267 3.47028 13.7914 3.81126 13.8904 4.18069L13.9275 4.34378C13.981 4.62163 13.9947 4.93582 13.9978 5.3262V10.9961Z">
                        </path>
                    </svg></span></button><button
                class="text-token-text-secondary hover:bg-token-bg-secondary rounded-lg" aria-label="Share"
                aria-pressed="false" data-state="closed"><span
                    class="flex items-center justify-center touch:w-10 h-8 w-8"><svg width="20" height="20"
                        viewBox="0 0 20 20" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="icon">
                        <path
                            d="M2.66821 12.6663V12.5003C2.66821 12.1331 2.96598 11.8353 3.33325 11.8353C3.70052 11.8353 3.99829 12.1331 3.99829 12.5003V12.6663C3.99829 13.3772 3.9992 13.8707 4.03052 14.2542C4.0612 14.6298 4.11803 14.8413 4.19849 14.9993L4.2688 15.1263C4.44511 15.4137 4.69813 15.6481 5.00024 15.8021L5.13013 15.8577C5.2739 15.9092 5.46341 15.947 5.74536 15.97C6.12888 16.0014 6.62221 16.0013 7.33325 16.0013H12.6663C13.3771 16.0013 13.8707 16.0014 14.2542 15.97C14.6295 15.9394 14.8413 15.8825 14.9993 15.8021L15.1262 15.7308C15.4136 15.5545 15.6481 15.3014 15.802 14.9993L15.8577 14.8695C15.9091 14.7257 15.9469 14.536 15.97 14.2542C16.0013 13.8707 16.0012 13.3772 16.0012 12.6663V12.5003C16.0012 12.1332 16.2991 11.8355 16.6663 11.8353C17.0335 11.8353 17.3313 12.1331 17.3313 12.5003V12.6663C17.3313 13.3553 17.3319 13.9124 17.2952 14.3626C17.2624 14.7636 17.1974 15.1247 17.053 15.4613L16.9866 15.6038C16.7211 16.1248 16.3172 16.5605 15.8215 16.8646L15.6038 16.9866C15.227 17.1786 14.8206 17.2578 14.3625 17.2952C13.9123 17.332 13.3553 17.3314 12.6663 17.3314H7.33325C6.64416 17.3314 6.0872 17.332 5.63696 17.2952C5.23642 17.2625 4.87552 17.1982 4.53931 17.054L4.39673 16.9866C3.87561 16.7211 3.43911 16.3174 3.13501 15.8216L3.01294 15.6038C2.82097 15.2271 2.74177 14.8206 2.70435 14.3626C2.66758 13.9124 2.66821 13.3553 2.66821 12.6663ZM9.33521 12.5003V4.9388L7.13696 7.13704C6.87732 7.39668 6.45625 7.39657 6.19653 7.13704C5.93684 6.87734 5.93684 6.45631 6.19653 6.19661L9.52954 2.86263L9.6311 2.77962C9.73949 2.70742 9.86809 2.66829 10.0002 2.66829C10.1763 2.66838 10.3454 2.73819 10.47 2.86263L13.804 6.19661C14.0633 6.45628 14.0634 6.87744 13.804 7.13704C13.5443 7.39674 13.1222 7.39674 12.8625 7.13704L10.6653 4.93977V12.5003C10.6651 12.8673 10.3673 13.1652 10.0002 13.1654C9.63308 13.1654 9.33538 12.8674 9.33521 12.5003Z">
                        </path>
                    </svg></span></button><span class="" data-state="closed"><button type="button" id="radix-_r_123_"
                    aria-haspopup="menu" aria-expanded="false" data-state="closed"
                    class="cursor-pointer text-token-text-secondary hover:bg-token-bg-secondary touch:px-2.5 h-[30px] rounded-md px-1.5"
                    aria-label="Switch model">
                    <div class="flex items-center"><svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor"
                            xmlns="http://www.w3.org/2000/svg" class="icon">
                            <path
                                d="M3.502 16.6663V13.3333C3.502 12.9661 3.79977 12.6683 4.16704 12.6683H7.50004L7.63383 12.682C7.93691 12.7439 8.16508 13.0119 8.16508 13.3333C8.16508 13.6547 7.93691 13.9227 7.63383 13.9847L7.50004 13.9984H5.47465C6.58682 15.2249 8.21842 16.0013 10 16.0013C13.06 16.0012 15.5859 13.711 15.9551 10.7513L15.9854 10.6195C16.0845 10.3266 16.3785 10.1334 16.6973 10.1732C17.0617 10.2186 17.3198 10.551 17.2745 10.9154L17.2247 11.2523C16.6301 14.7051 13.6224 17.3313 10 17.3314C8.01103 17.3314 6.17188 16.5383 4.83208 15.2474V16.6663C4.83208 17.0335 4.53411 17.3311 4.16704 17.3314C3.79977 17.3314 3.502 17.0336 3.502 16.6663ZM4.04497 9.24935C3.99936 9.61353 3.66701 9.87178 3.30278 9.8265C2.93833 9.78105 2.67921 9.44876 2.72465 9.08431L4.04497 9.24935ZM10 2.66829C11.9939 2.66833 13.8372 3.46551 15.1778 4.76204V3.33333C15.1778 2.96616 15.4757 2.66844 15.8428 2.66829C16.2101 2.66829 16.5079 2.96606 16.5079 3.33333V6.66634C16.5079 7.03361 16.2101 7.33138 15.8428 7.33138H12.5098C12.1425 7.33138 11.8448 7.03361 11.8448 6.66634C11.8449 6.29922 12.1426 6.0013 12.5098 6.0013H14.5254C13.4133 4.77488 11.7816 3.99841 10 3.99837C6.93998 3.99837 4.41406 6.28947 4.04497 9.24935L3.38481 9.16634L2.72465 9.08431C3.17574 5.46702 6.26076 2.66829 10 2.66829Z">
                            </path>
                        </svg></div>
                </button></span><button
                class="text-token-text-secondary hover:bg-token-bg-secondary touch:w-10 flex h-8 w-8 items-center justify-center rounded-lg"
                aria-label="More actions" type="button" id="radix-_r_126_" aria-haspopup="menu" aria-expanded="false"
                data-state="closed"><svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor"
                    xmlns="http://www.w3.org/2000/svg" class="icon">
                    <path
                        d="M15.498 8.50159C16.3254 8.50159 16.9959 9.17228 16.9961 9.99963C16.9961 10.8271 16.3256 11.4987 15.498 11.4987C14.6705 11.4987 14 10.8271 14 9.99963C14.0002 9.17228 14.6706 8.50159 15.498 8.50159Z">
                    </path>
                    <path
                        d="M4.49805 8.50159C5.32544 8.50159 5.99689 9.17228 5.99707 9.99963C5.99707 10.8271 5.32555 11.4987 4.49805 11.4987C3.67069 11.4985 3 10.827 3 9.99963C3.00018 9.17239 3.6708 8.50176 4.49805 8.50159Z">
                    </path>
                    <path
                        d="M10.0003 8.50159C10.8276 8.50176 11.4982 9.17239 11.4984 9.99963C11.4984 10.827 10.8277 11.4985 10.0003 11.4987C9.17283 11.4987 8.50131 10.8271 8.50131 9.99963C8.50149 9.17228 9.17294 8.50159 10.0003 8.50159Z">
                    </path>
                </svg></button><button
                class="group/footnote bg-token-bg-primary flex w-fit items-center gap-1.5 px-3 py-1.5 hover:bg-token-bg-tertiary rounded-3xl"
                aria-label="Sources">
                <div class="flex flex-row-reverse">
                    <div
                        class="border-token-bg-primary bg-token-bg-primary flex items-center overflow-clip rounded-full -ms-1.5 first:me-0 border-2 group-hover/footnote:border-token-bg-tertiary relative">
                        <div class="relative inline-block shrink-0"><img alt="" width="32" height="32"
                                class="icon-sm rounded-full border border-token-border-light border-[0.5px] duration-200 motion-safe:transition-opacity opacity-100"
                                src="https://www.google.com/s2/favicons?domain=https://developers.google.com&amp;sz=32">
                        </div>
                    </div>
                </div>
                <div class="text-token-text-secondary mt-[-1px] text-[13px] font-medium">Sources</div>
            </button></div>
    </div>
    <div class="mt-3 w-full empty:hidden">
        <div class="text-center"></div>
    </div>
</div>
